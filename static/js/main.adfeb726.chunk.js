(this.webpackJsonpnotebook=this.webpackJsonpnotebook||[]).push([[0],{104:function(e,t,n){e.exports=n(239)},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"first",(function(){return N})),n.d(r,"last",(function(){return k})),n.d(r,"chunk",(function(){return A})),n.d(r,"swap",(function(){return j})),n.d(r,"mapReversed",(function(){return I})),n.d(r,"map",(function(){return w}));var a={};n.r(a),n.d(a,"getTabbableElements",(function(){return G}));var o={};n.r(o),n.d(o,"clear",(function(){return x}));var c={};n.r(c),n.d(c,"deleteProperty",(function(){return T}));var i={};n.r(i),n.d(i,"generateRandom",(function(){return U})),n.d(i,"isString",(function(){return _}));var u=n(1),l=n.n(u),d=n(21),s=n.n(d),p=(n(109),n(110),n(111),n(9)),f=(n(118),n(10));n(119);function E(e){return l.a.createElement("button",{className:"AppHeaderButton",disabled:e.disabled,title:e.title,onClick:e.onClick},e.children)}function y(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(E,{title:"Create new group",onClick:e.onCreateNewFolder},l.a.createElement(f.c,null)),l.a.createElement(E,{title:"Create new record",onClick:e.onCreateNewFile},l.a.createElement(f.j,null)))}var m,v=n(4),R=n.n(v),O=n(12),h={open:!1,id:void 0};function g(e){return function(){var t=Object(O.a)(R.a.mark((function t(n,r){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:m.REPLACE,payload:{open:!0,id:e}});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}!function(e){e.REPLACE="Editor/Actions/REPLACE",e.REPLACE_ALL="Editor/Actions/REPLACE_ALL"}(m||(m={}));var b,C,D=n(3);function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&!(e.length<=0))return e[0]}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&!(e.length<=0))return e[e.length-1]}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(t<1)throw Error("Chunk size must be greater than one.");for(var n=Array.from({length:Math.ceil(e.length/t)},(function(){return[]})),r=0,a=0;a<n.length;a++)for(var o=n[a],c=0;c<t;c++)"undefined"!==typeof e[r]&&o.push(e[r++]);return n}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<0||t<0)throw Error("Swap indexes must be greater than or equal to 0.");if(e>=n.length||t>=n.length)throw Error("Swap indexes must be less than the size of array.");for(var r=Array(n.length),a=n[t],o=n[e],c=0;c<n.length;c++)r[c]=c!==e?c!==t?n[c]:o:a;return r}function I(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array(t.length),r=t.length-1;r>-1;r--)n[t.length-r-1]=e(t[r],r,t);return n}function w(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array(t.length),r=0;r<t.length;r++)n[r]=e(t[r],r,t);return n}function G(e){var t,n=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])',"audio[controls]","video[controls]"];if(e&&document)return"string"===typeof e?null===(t=document.getElementById(e))||void 0===t?void 0:t.querySelectorAll(n.join(",")):e.querySelectorAll(n.join(","))}!function(e){e[e.DELETE_RECORD=0]="DELETE_RECORD",e[e.RENAME_RECORD=1]="RENAME_RECORD",e[e.CREATE_GROUP=2]="CREATE_GROUP",e[e.RENAME_GROUP=3]="RENAME_GROUP"}(b||(b={})),function(e){e.OPEN_OVERLAY="Overlays/Actions/OPEN_OVERLAY",e.CLOSE_OVERLAY="Overlays/Actions/CLOSE_OVERLAY"}(C||(C={}));var S=n(11);function x(e){var t=e.getSelection(),n=e.getCurrentContent(),r=e.getCurrentInlineStyle().reduce((function(e,n){return S.Modifier.removeInlineStyle(e,t,n)}),n);return S.EditorState.push(e,S.Modifier.setBlockType(r,t,"unstyled"),"change-block-type")}var L=n(98),P=n(103),T=function(e,t){t[e];return Object(L.a)(t,[e].map(P.a))};function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t="";if(e<=0)return t;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t.length<e;){var r=Math.floor(Math.random()*n.length);t+=n.charAt(r)}return t}function _(e){return"string"===typeof e}var V={array:r,dom:a,editor:o,object:c,string:i};function B(e,t){return function(){var n=Object(O.a)(R.a.mark((function n(r,a){return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:C.OPEN_OVERLAY,payload:Object(D.a)({},t,{id:V.string.generateRandom(3),type:e})});case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}function M(e){return function(){var t=Object(O.a)(R.a.mark((function t(n,r){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:C.CLOSE_OVERLAY,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}var H=Object(p.c)(null,(function(e){return{onCreateNewFile:function(){return e(g())},onCreateNewFolder:function(){return e(B(b.CREATE_GROUP))}}}))((function(e){return l.a.createElement("div",{className:"AppHeaderControls"},l.a.createElement(y,{onCreateNewFolder:e.onCreateNewFolder,onCreateNewFile:e.onCreateNewFile}))}));function F(e){return l.a.createElement("header",{id:"AppHeader",className:"AppHeader"},l.a.createElement("h1",{className:"AppHeader__title"},"Notebook"),l.a.createElement(H,null))}n(214),n(215);function K(e){return l.a.createElement("button",{className:"BackButton",title:"Go back",onClick:e.onClick},l.a.createElement(f.a,null))}var z;n(216);function q(e){return l.a.createElement("button",{className:"HomeButton",onClick:e.onClick,title:"Back to root"},l.a.createElement(f.i,null))}function Y(e){return function(){var t=Object(O.a)(R.a.mark((function t(n,r){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:z.OPEN_GROUP,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function W(e){return function(){var t=Object(O.a)(R.a.mark((function t(n,r){var a,o,c,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),o=a.notes,c=o.records,i=c[e.id]){t.next=5;break}throw Error("NoteRecord with ID ".concat(e.id," is absent."));case 5:if(i.parent===e.parent){t.next=7;break}throw Error('Changing record location is not permitted. If your intention was moving record to another group, consider using the "moveToGroup" function.');case 7:n({type:z.UPDATE_RECORD,payload:e});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function J(e,t){return function(){var n=Object(O.a)(R.a.mark((function n(r,a){var o,c,i,u,l,d,s;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a(),c=o.notes,i=c.groups,u=c.records,l=i[e],d=i[t],s=u[t],l){n.next=7;break}throw Error("NoteGroup with ID ".concat(e," is absent."));case 7:if(d||s){n.next=9;break}throw Error("ID ".concat(t," does not belong to any NoteRecord or NoteGroup."));case 9:d&&r({type:z.MOVE_GROUP,payload:Object(D.a)({},d,{targetGroupID:e})}),s&&r({type:z.MOVE_RECORD,payload:Object(D.a)({},s,{targetGroupID:e})});case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}!function(e){e.OPEN_GROUP="Notes/Actions/Group/OPEN_GROUP",e.CREATE_RECORD="Notes/Actions/CREATE_RECORD",e.REMOVE_RECORD="Notes/Actions/REMOVE_RECORD",e.UPDATE_RECORD="Notes/Actions/UPDATE_RECORD",e.CREATE_GROUP="Notes/Actions/CREATE_GROUP",e.UPDATE_GROUP="Notes/Actions/UPDATE_GROUP",e.REMOVE_GROUP="Notes/Actions/REMOVE_GROUP",e.MOVE_GROUP="Notes/Actions/MOVE_GROUP",e.MOVE_RECORD="Notes/Actions/MOVE_RECORD",e.REORDER="Notes/Actions/REORDER"}(z||(z={}));var Q=Object(p.c)((function(e){var t=e.notes,n=t.currentGroupID,r=t.groups[n];return{open:Boolean(r.parent),currentGroupID:n}}),(function(e){return{openGroup:function(t){return e(Y(t))},openParentGroup:function(t){return e((n=t,function(){var e=Object(O.a)(R.a.mark((function e(t,r){var a,o,c,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r(),o=a.notes,c=o.groups,(i=c[n])&&i.parent&&t({type:z.OPEN_GROUP,payload:i.parent});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));var n}}}))((function(e){return l.a.createElement("div",{className:"Navigator","data-open":e.open},l.a.createElement(K,{onClick:function(){"function"===typeof e.openParentGroup&&e.openParentGroup(e.currentGroupID)}}),l.a.createElement(q,{onClick:function(){"function"===typeof e.openGroup&&e.openGroup("root")}}))})),X=n(36),Z=(n(217),n(218),n(58));n(219);function $(e){return l.a.createElement("button",{className:"ResizeButton",onClick:function(t){"function"===typeof e.onClick&&e.onClick(!e.maximized)},title:"".concat(e.maximized?"Minimize":"Maximize"," Editor")},e.maximized?l.a.createElement(Z.b,null):l.a.createElement(Z.a,null))}n(220);function ee(e){return l.a.createElement("button",{className:"CloseButton",title:"Close Editor",onClick:e.onClick},l.a.createElement(f.b,null))}n(221);var te=Object(u.forwardRef)((function(e,t){var n=Object(u.useRef)(null);return Object(u.useImperativeHandle)(t,(function(){return{getValue:function(){return n.current?n.current.value:""}}})),l.a.createElement("input",{ref:n,className:"NameInput",placeholder:"New title",type:"text",defaultValue:e.defaultValue,onChange:e.onChange,autoFocus:!0})}));n(222);function ne(e){return l.a.createElement("div",{className:"ChangeIndicator"},l.a.createElement("span",{className:"ChangeIndicatorDot","data-state":e.state}))}var re,ae=Object(u.forwardRef)((function(e,t){return l.a.createElement("div",{className:"AppEditorHeader"},l.a.createElement(te,{ref:t,defaultValue:e.defaultValue,onChange:e.onChange}),l.a.createElement(ne,{state:e.indicatorState}),l.a.createElement($,{maximized:e.maximized,onClick:e.onResize}),l.a.createElement(ee,{onClick:e.onClose}))}));n(223);function oe(e){return function(t,n){switch(t){case re.BOLD:return e(S.RichUtils.toggleInlineStyle(n,re.BOLD)),"handled";case re.ITALIC:return e(S.RichUtils.toggleInlineStyle(n,re.ITALIC)),"handled";case re.UNDERLINE:return e(S.RichUtils.toggleInlineStyle(n,re.UNDERLINE)),"handled";case re.STRIKETHROUGH:return e(S.RichUtils.toggleInlineStyle(n,re.STRIKETHROUGH)),"handled";case re.UNDO:return e(S.EditorState.undo(n)),"handled";case re.REDO:return e(S.EditorState.redo(n)),"handled";case re.SAVE:return"handled";case re.CLEAR:return e(V.editor.clear(n)),"handled";default:return"not-handled"}}}!function(e){e.BOLD="BOLD",e.ITALIC="ITALIC",e.UNDERLINE="UNDERLINE",e.STRIKETHROUGH="STRIKETHROUGH",e.SAVE="SAVE",e.UNDO="UNDO",e.REDO="REDO",e.CLEAR="CLEAR"}(re||(re={}));var ce={9:"tab",13:"enter",27:"esc",66:"b",67:"c",73:"i",83:"s",85:"u",87:"y",97:"z"};function ie(e){var t=e.ctrlKey,n=e.shiftKey,r=e.keyCode,a=ce[r];return t&&"b"===a?re.BOLD:t&&"i"===a?re.ITALIC:t&&"u"===a?re.UNDERLINE:t&&n&&"s"===a?re.STRIKETHROUGH:t&&"s"===a?re.SAVE:t&&"z"===a?re.UNDO:t&&"y"===a?re.REDO:t&&n&&"c"===a?re.CLEAR:Object(S.getDefaultKeyBinding)(e)}n(224),n(225);function ue(e){return l.a.createElement("button",{className:"EditorControlButton",title:e.title,tabIndex:e.tabIndex,onMouseDown:function(t){"function"===typeof e.onClick&&e.onClick(t,e.command)},"data-active":e.active},e.children)}function le(e){var t,n,r,a;function o(t,n){t.preventDefault(),"function"===typeof e.onClick&&e.onClick(n)}return l.a.createElement("div",{className:"EditorControls"},l.a.createElement(ue,{command:re.BOLD,onClick:o,title:"Bold",active:Boolean(null===(t=e.inlineStyles)||void 0===t?void 0:t.has("BOLD")),tabIndex:-1},l.a.createElement(f.d,null)),l.a.createElement(ue,{command:re.ITALIC,onClick:o,title:"Italic",active:Boolean(null===(n=e.inlineStyles)||void 0===n?void 0:n.has("ITALIC")),tabIndex:-1},l.a.createElement(f.f,null)),l.a.createElement(ue,{command:re.UNDERLINE,onClick:o,title:"Underline",active:Boolean(null===(r=e.inlineStyles)||void 0===r?void 0:r.has("UNDERLINE")),tabIndex:-1},l.a.createElement(f.h,null)),l.a.createElement(ue,{command:re.STRIKETHROUGH,onClick:o,title:"Strikethrough",active:Boolean(null===(a=e.inlineStyles)||void 0===a?void 0:a.has("STRIKETHROUGH")),tabIndex:-1},l.a.createElement(f.g,null)),l.a.createElement(ue,{command:re.CLEAR,onClick:o,title:"Clear formatting",active:!1,tabIndex:-1},l.a.createElement(f.e,null)))}var de,se=Object(u.forwardRef)((function(e,t){var n=Object(u.useState)(e.rawContentState?S.EditorState.createWithContent(Object(S.convertFromRaw)(e.rawContentState)):S.EditorState.createEmpty()),r=Object(X.a)(n,2),a=r[0],o=r[1],c=Object(u.useRef)(null);function i(t){(o(t),"function"===typeof e.onChange)&&(t.getCurrentContent().getBlockMap().equals(a.getCurrentContent().getBlockMap())||e.onChange())}function d(e){c.current&&c.current.focus()}function s(){c.current&&c.current.blur()}return Object(u.useImperativeHandle)(t,(function(){return{getPlainText:function(){return a.getCurrentContent().getPlainText()},getRawDraftContentState:function(){return Object(S.convertToRaw)(a.getCurrentContent())},focusEditor:d,blurEditor:s}})),l.a.createElement("div",{className:"Editor"},l.a.createElement(le,{inlineStyles:a.getCurrentInlineStyle(),onClick:function(e){oe(i)(e,a)}}),l.a.createElement("div",{className:"EditorWrapper",onMouseDown:d},l.a.createElement(S.Editor,{ref:c,editorState:a,onChange:i,keyBindingFn:ie,handleKeyCommand:oe(i),spellCheck:e.spellCheck})))}));function pe(e){var t=Object(u.useState)(e.maximized),n=Object(X.a)(t,2),r=n[0],a=n[1],o=Object(u.useState)(de.IDLE),c=Object(X.a)(o,2),i=c[0],d=c[1],s=Object(u.useRef)(),p=Object(u.useRef)(),f=Object(u.useRef)();function E(){var t={id:e.id||V.string.generateRandom(),parent:e.currentGroupID,title:"",content:{entityMap:{},blocks:[]}};if(s.current&&(t.title=s.current.getValue()),p.current&&(t.content=p.current.getRawDraftContentState()),"function"===typeof e.onSave&&!e.id)return e.onSave(e.currentGroupID,t),void(e.saveAndClose&&!e.autoSave?m():d(de.SAVED));"function"===typeof e.onUpdate&&e.id&&(e.onUpdate(t),e.saveAndClose&&!e.autoSave?m():d(de.SAVED))}function y(){d(de.UNSAVED),f.current&&clearTimeout(f.current),e.autoSave&&Boolean(e.id)&&(f.current=setTimeout((function(){E()}),3e3))}function m(){f.current&&clearTimeout(f.current),"function"===typeof e.onClose&&e.onClose()}return l.a.createElement("div",{className:"AppEditor"},l.a.createElement("div",{className:"AppEditorWrapper",onKeyDown:function(e){var t=e.ctrlKey,n=e.shiftKey,r=e.keyCode,a=ce[r];t&&!n&&"s"===a&&(e.preventDefault(),f.current&&clearTimeout(f.current),i===de.UNSAVED&&E()),"esc"===a&&(e.preventDefault(),m())}},l.a.createElement("div",{className:"AppEditorCanvas","data-maximized":r},l.a.createElement(ae,{maximized:r,ref:s,onClose:e.onClose,onResize:a,defaultValue:e.title,indicatorState:i,onChange:y}),l.a.createElement(se,{ref:p,spellCheck:e.spellCheck,onChange:y,rawContentState:e.content}))))}!function(e){e[e.IDLE=0]="IDLE",e[e.SAVED=1]="SAVED",e[e.UNSAVED=2]="UNSAVED"}(de||(de={}));var fe=Object(p.c)((function(e){var t,n=e.editor,r=e.settings,a=e.notes,o=n.open,c=n.id,i=r.editor,u=a.currentGroupID,l=a.records;return c&&(t=l[c]),Object(D.a)({open:o,maximized:!1,autoSave:Boolean(i.autoSave),saveAndClose:Boolean(i.saveAndClose),spellCheck:Boolean(i.spellCheck),currentGroupID:u},t)}),(function(e){return{onClose:function(){return e(function(){var e=Object(O.a)(R.a.mark((function e(t,n){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:m.REPLACE_ALL,payload:{open:!1,id:void 0}});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},onSave:function(t,n){Object(p.b)((function(){e(function(e,t){return function(){var n=Object(O.a)(R.a.mark((function n(r,a){var o,c,i,u,l;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a(),c=o.notes,i=c.records,u=c.groups,l=u[e],t.id&&!i[t.id]){n.next=5;break}throw Error("NoteRecord with the ID ".concat(t.id," already exists."));case 5:if(l){n.next=7;break}throw Error("NoteGroup with the ID ".concat(e," is absent"));case 7:r({type:z.CREATE_RECORD,payload:Object(D.a)({},t,{parent:e})});case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(t,n)),e(g(n.id))}))},onUpdate:function(t){return e(W(t))}}}))((function(e){return l.a.createElement(l.a.Fragment,null,e.open&&Object(d.createPortal)(l.a.createElement(pe,e),document.getElementById("app-editor-root")))})),Ee=n(99),ye=(n(226),n(227),n(15));function me(e){return l.a.createElement(ye.a,{id:e.id},l.a.createElement(ye.c,{disabled:!1,onClick:function(t){t.stopPropagation(),"function"===typeof e.onOpen&&e.onOpen()}},"Open"),l.a.createElement(ye.c,{disabled:!1,onClick:function(t){t.preventDefault(),"function"===typeof e.onRename&&e.onRename(e.id)}},"Rename"),l.a.createElement(ye.c,{disabled:!Boolean(e.groupParent),onClick:function(t){t.stopPropagation(),"function"===typeof e.onUngroup&&e.onUngroup(e.id)}},"Ungroup"),l.a.createElement(ye.c,{disabled:Boolean(e.childrenCount),onClick:function(t){t.stopPropagation(),"function"===typeof e.onRemove&&e.onRemove(e.id)}},"Delete"))}function ve(e){function t(t){"function"===typeof e.onDoubleClick&&e.onDoubleClick(e.id)}return l.a.createElement("div",{className:"NoteGroup",draggable:"true",onDragOver:function(e){e.preventDefault()},onDragStart:function(t){t.dataTransfer.setData("text/plain",JSON.stringify({index:e.index,id:e.id}))},onDrop:function(t){t.preventDefault();var n=JSON.parse(t.dataTransfer.getData("text/plain")),r=n&&n.id,a=e.id;"function"===typeof e.moveToGroup&&r&&r!==a&&e.moveToGroup(a,r)},onDoubleClick:t,tabIndex:e.tabIndex,onKeyDown:function(t){var n=t.keyCode;"enter"===ce[n]&&"function"===typeof e.onDoubleClick&&(t.preventDefault(),e.onDoubleClick(e.id))}},l.a.createElement(ye.b,{id:e.id,holdToDisplay:-1},l.a.createElement("div",{className:"NoteGroupBack"}),l.a.createElement("div",{className:"NoteGroupFront"},l.a.createElement("h5",{className:"NoteGroupTitle"},l.a.createElement("span",null,e.title)))),l.a.createElement(me,{id:e.id,parent:e.parent,groupParent:e.groupParent,childrenCount:e.childrenCount,onOpen:t,onUngroup:e.ungroup,onRemove:e.removeGroup,onRename:e.renameGroup}))}n(228);function Re(e){return l.a.createElement(ye.a,{id:e.id},l.a.createElement(ye.c,{disabled:!1,onClick:function(t){t.stopPropagation(),"function"===typeof e.onOpen&&e.onOpen()}},"Open"),l.a.createElement(ye.c,{disabled:!1,onClick:function(t){t.stopPropagation(),"function"===typeof e.onRename&&e.onRename(e.id)}},"Rename"),l.a.createElement(ye.c,{disabled:!Boolean(e.groupParent),onClick:function(t){t.stopPropagation(),"function"===typeof e.onUngroup&&e.onUngroup(e.id)}},"Ungroup"),l.a.createElement(ye.c,{disabled:!1,onClick:function(t){t.stopPropagation(),"function"===typeof e.onRemove&&e.onRemove(e.id)}},"Delete"))}function Oe(e){function t(){"function"===typeof e.onClick&&e.onClick(e.id)}return l.a.createElement("div",{className:"NoteRecord",draggable:"true",onDragOver:function(e){e.preventDefault()},onDragStart:function(t){t.dataTransfer.setData("text/plain",JSON.stringify({index:e.index,id:e.id}))},onDrop:function(t){t.preventDefault();var n=JSON.parse(t.dataTransfer.getData("text/plain")),r=parseInt(n&&n.index),a=e.index;"function"!==typeof e.onDrop||Number.isNaN(r)||r===a||e.onDrop(r,a)},onClick:t,tabIndex:e.tabIndex,onKeyDown:function(t){var n=t.keyCode;"enter"===ce[n]&&"function"===typeof e.onClick&&(t.preventDefault(),e.onClick(e.id))}},l.a.createElement(ye.b,{id:e.id,holdToDisplay:-1},l.a.createElement("div",{className:"NoteRecordCard"},l.a.createElement("h4",{className:"NoteRecordTitle"},e.title))),l.a.createElement(Re,{id:e.id,parent:e.parent,groupParent:e.groupParent,onOpen:t,onUngroup:e.ungroup,onRemove:e.removeRecord,onRename:e.renameRecord}))}var he=Object(p.c)((function(e,t){var n=t.id,r=t.index,a=t.tabIndex,o=e.notes,c=o.records,i=o.groups,u=i[o.currentGroupID],l=c[n]||i[n];return Object(D.a)({index:r,tabIndex:a},l,{groupParent:u.parent})}),(function(e){return{moveToGroup:function(t,n){return e(J(t,n))},openGroup:function(t){return e(Y(t))},swapGroupChildren:function(t,n){return e(function(e,t){return function(){var n=Object(O.a)(R.a.mark((function n(r,a){var o,c,i,u,l;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=a(),c=o.notes,i=c.currentGroupID,u=c.groups,l=u[i],r({type:z.REORDER,payload:Object(D.a)({},l,{children:V.array.swap(e,t,l.children)})});case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(t,n))},openEditor:function(t){return e(g(t))},removeRecord:function(t){return e(B(b.DELETE_RECORD,{recordID:t}))},removeGroup:function(t){return e((n=t,function(){var e=Object(O.a)(R.a.mark((function e(t,r){var a,o,c,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r(),o=a.notes,c=o.groups,i=c[n]){e.next=5;break}throw Error("NoteGroup with ID ".concat(n," is absent."));case 5:if(!(i.children.length>0)){e.next=7;break}throw Error("NoteGroup must be empty before removing.");case 7:t({type:z.REMOVE_GROUP,payload:i,meta:{requiresConfirmation:!0}});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));var n},ungroup:function(t){return e(function(e){return function(){var t=Object(O.a)(R.a.mark((function t(n,r){var a,o,c,i,u,l;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),o=a.notes,c=o.currentGroupID,i=o.groups,(u=i[c]).parent){t.next=5;break}throw Error("Ungroup is not allowed in root group.");case 5:l=i[u.parent],n(J(l.id,e));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))},renameRecord:function(t){return e(B(b.RENAME_RECORD,{recordID:t}))},renameGroup:function(t){return e(B(b.RENAME_GROUP,{groupID:t}))}}}))((function(e){return l.a.createElement(l.a.Fragment,null,e.children?l.a.createElement(ve,{id:e.id,index:e.index,title:e.title,moveToGroup:e.moveToGroup,onDoubleClick:e.openGroup,tabIndex:e.tabIndex,parent:e.parent,groupParent:e.groupParent,childrenCount:e.children.length,removeGroup:e.removeGroup,ungroup:e.ungroup,renameGroup:e.renameGroup}):l.a.createElement(Oe,{id:e.id,index:e.index,title:e.title,onClick:e.openEditor,onDrop:e.swapGroupChildren,tabIndex:e.tabIndex,moveToGroup:e.moveToGroup,parent:e.parent,groupParent:e.groupParent,removeRecord:e.removeRecord,ungroup:e.ungroup,renameRecord:e.renameRecord}))}));var ge=Object(Ee.a)([function(e,t){return e.notes.groups[t].children}],(function(e){return e}));var be=Object(p.c)((function(e){var t=e.notes.currentGroupID;return{children:ge(e,t)}}))((function(e){return l.a.createElement("div",{className:"NotesWrapper"},l.a.createElement("div",{className:"Notes"},V.array.map((function(e,t){return l.a.createElement(he,{key:e,id:e,index:t,tabIndex:t})}),e.children)),!Boolean(e.children.length)&&l.a.createElement("h4",{className:"EmptyNotesHeading"},"No records found. Create new record using ",l.a.createElement(f.j,null)))}));n(229),n(230),n(231);function Ce(e){return l.a.createElement("header",{className:"OverlayHeader"},l.a.createElement("span",{className:"OverlayHeaderTitle"},e.title),l.a.createElement("button",{className:"OverlayHeaderButton",onClick:function(){"function"===typeof e.onClose&&e.onClose(e.id)},tabIndex:e.tabIndex},l.a.createElement(f.b,null)))}n(232);function De(e){return l.a.createElement("div",{className:"OverlayBody"},e.children)}n(233);function Ne(e){return l.a.createElement("footer",{className:"OverlayFooter"},e.children)}var ke=Object(p.c)(null,(function(e){return{onConfirm:function(t,n){Object(p.b)((function(){e(function(e){return function(){var t=Object(O.a)(R.a.mark((function t(n,r){var a,o,c,i;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),o=a.notes,c=o.records,i=c[e],e){t.next=5;break}throw Error("NoteRecord ID is absent.");case 5:if(i){t.next=7;break}throw Error("NoteRecord with the ID ".concat(e," is absent."));case 7:n({type:z.REMOVE_RECORD,payload:i});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t)),e(M(n))}))}}}))((function(e){return l.a.createElement("div",{className:"DeleteRecordOverlay"},l.a.createElement(Ce,{id:e.id,onClose:e.onClose,title:"Delete Note"}),l.a.createElement(De,null,l.a.createElement("p",null,"Are you sure you want to permanently delete this note?")),l.a.createElement(Ne,null,l.a.createElement("button",{onClick:function(){"function"===typeof e.onConfirm&&e.onConfirm(e.recordID,e.overlayID)}},"Delete Note"),l.a.createElement("button",{onClick:e.onClose},"Keep Note")))})),Ae=(n(234),n(235),Object(u.forwardRef)((function(e,t){return l.a.createElement("input",{ref:t,type:e.type,placeholder:e.placeholder,className:"FormInput",autoFocus:e.autoFocus,defaultValue:e.defaultValue,name:e.name})})));var je=Object(p.c)((function(e,t){return{record:e.notes.records[t.recordID]}}),(function(e){return{onSave:function(t,n){Object(p.b)((function(){e(W(t)),e(M(n))}))}}}))((function(e){var t=Object(u.useRef)(null);return l.a.createElement("form",{className:"RenameRecordOverlay",onSubmit:function(n){if(n.preventDefault(),"function"===typeof e.onSave){var r=e.record.title;t.current&&(r=t.current.value);var a=Object(D.a)({},e.record,{title:r});e.onSave(a,e.overlayID)}}},l.a.createElement(Ce,{id:e.id,title:"Rename Note",onClose:e.onClose}),l.a.createElement(De,null,l.a.createElement(Ae,{ref:t,type:"text",name:"title",defaultValue:e.record.title,autoFocus:!0})),l.a.createElement(Ne,null,l.a.createElement("button",{type:"button"},"Save"),l.a.createElement("button",{onClick:e.onClose},"Cancel")))}));n(236);var Ie=Object(p.c)((function(e){return{currentGroupID:e.notes.currentGroupID}}),(function(e){return{createNewGroup:function(t,n){e(function(e,t){return function(){var n=Object(O.a)(R.a.mark((function n(r,a){var o,c,i;return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=a(),c=o.notes,i=c.groups,i[e]){n.next=5;break}throw Error("NoteGroup with ID ".concat(e," is absent."));case 5:if(!i[t.id]){n.next=7;break}throw Error("NoteGroup with ID ".concat(t.id," already exist."));case 7:r({type:z.CREATE_GROUP,payload:Object(D.a)({},t,{parent:e})});case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}(t,n))}}}))((function(e){var t=Object(u.useRef)(null);return l.a.createElement("form",{className:"CreateGroupOverlay",onSubmit:function(n){n.preventDefault();var r={id:V.string.generateRandom(),title:"",children:[],parent:e.currentGroupID};t.current&&(r.title=t.current.value),"function"===typeof e.createNewGroup&&e.createNewGroup(r.parent,r),e.onClose()}},l.a.createElement(Ce,{id:e.id,title:"Create Group",onClose:e.onClose}),l.a.createElement(De,null,l.a.createElement(Ae,{ref:t,type:"text",placeholder:"Group name",autoFocus:!0})),l.a.createElement(Ne,null,l.a.createElement("button",{type:"submit"},"Create Group"),l.a.createElement("button",{onClick:e.onClose},"Cancel")))}));n(237);var we=Object(p.c)((function(e,t){return{group:e.notes.groups[t.groupID]}}),(function(e){return{onSave:function(t,n){Object(p.b)((function(){var r;e((r=t,function(){var e=Object(O.a)(R.a.mark((function e(t,n){var a,o,c,i;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),o=a.notes,c=o.groups,i=c[r.id]){e.next=5;break}throw Error("NoteGroup with ID ".concat(r.id," is absent."));case 5:t({type:z.UPDATE_GROUP,payload:Object(D.a)({},r,{id:i.id,children:i.children})});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),e(M(n))}))}}}))((function(e){var t=Object(u.useRef)(null);return l.a.createElement("form",{className:"RenameGroupOverlay",onSubmit:function(n){if(n.preventDefault(),"function"===typeof e.onSave){var r=e.group.title;t.current&&(r=t.current.value);var a=Object(D.a)({},e.group,{title:r});e.onSave(a,e.overlayID)}}},l.a.createElement(Ce,{id:e.id,title:"Rename Group",onClose:e.onClose}),l.a.createElement(De,null,l.a.createElement(Ae,{ref:t,type:"text",name:"title",defaultValue:e.group.title,autoFocus:!0})),l.a.createElement(Ne,null,l.a.createElement("button",{type:"submit"},"Save"),l.a.createElement("button",{onClick:e.onClose},"Cancel")))})),Ge=new Map;Ge.set(b.DELETE_RECORD,ke),Ge.set(b.RENAME_RECORD,je),Ge.set(b.CREATE_GROUP,Ie),Ge.set(b.RENAME_GROUP,we);var Se=Ge;n(238);function xe(e){var t=Object(u.useRef)([]);function n(){"function"===typeof e.onClose&&e.onClose(e.id)}return Object(u.useEffect)((function(){return t.current&&(t.current=V.dom.getTabbableElements(e.id)),function(){t.current&&(t.current=[])}}),[e.id]),l.a.createElement("div",{id:e.id,className:"Overlay",onKeyDown:function(e){var r=e.keyCode,a=e.target,o=e.shiftKey,c=ce[r];"esc"!==c?"tab"===c&&o?t&&a===V.array.first(t.current)&&(e.preventDefault(),V.array.last(t.current).focus()):"tab"===c&&t&&a===V.array.last(t.current)&&(e.preventDefault(),V.array.first(t.current).focus()):n()}},l.a.Children.map(e.children,(function(e){return l.a.cloneElement(e,Object(D.a)({},e.props,{onClose:n}))})))}var Le=Object(p.c)((function(e){return{overlays:e.overlays}}),(function(e){return{onClose:function(t){return e(M(t))}}}))((function(e){return e.overlays.length?Object(d.createPortal)(l.a.createElement("div",{className:"OverlayContainer"},V.array.mapReversed((function(t){var n=Se.get(t.type);return n?l.a.createElement(xe,{key:t.id,id:t.id,onClose:e.onClose},l.a.createElement(n,{overlayID:t.id,recordID:t.recordID,groupID:t.groupID,onClose:e.onClose})):null}),e.overlays)),document.getElementById("app-overlays-root")):null}));var Pe=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(F,null),l.a.createElement(Q,null),l.a.createElement(fe,null),l.a.createElement(be,null),l.a.createElement(Le,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Te,Ue=n(22),_e=n(100),Ve=n(101),Be=n(13),Me={instruction:{id:"instruction",parent:"root",title:"INSTRUCTIONS",content:{blocks:[{key:"8ofdk",text:"EDITOR",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:6,style:"BOLD"}],entityRanges:[],data:{}},{key:"aemmj",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"35hd4",text:"In order to save a note, use shortcut ctrl + s.",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"2dqfh",text:"To close editor, you can simply use escape key. (ESC)",type:"unstyled",depth:0,inlineStyleRanges:[{offset:48,length:5,style:"ITALIC"}],entityRanges:[],data:{}},{key:"e5mv2",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"a71vr",text:"Available shortcuts:",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"dhmf5",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"8jlev",text:"1. ctrl + b - Bold",type:"unstyled",depth:0,inlineStyleRanges:[{offset:14,length:4,style:"BOLD"}],entityRanges:[],data:{}},{key:"5ikho",text:"2. ctrl + i  - Italic",type:"unstyled",depth:0,inlineStyleRanges:[{offset:15,length:6,style:"ITALIC"}],entityRanges:[],data:{}},{key:"eacar",text:"3. ctrl + u - Underline",type:"unstyled",depth:0,inlineStyleRanges:[{offset:14,length:9,style:"UNDERLINE"}],entityRanges:[],data:{}},{key:"2h4vl",text:"4. ctrl + shift + s - Strikethrough",type:"unstyled",depth:0,inlineStyleRanges:[{offset:22,length:13,style:"STRIKETHROUGH"}],entityRanges:[],data:{}},{key:"cefcc",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"alrtq",text:"NOTES",type:"unstyled",depth:0,inlineStyleRanges:[{offset:0,length:5,style:"BOLD"}],entityRanges:[],data:{}},{key:"cgvgp",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"1jo4c",text:"- To move a note or a group into the another group, simply drag that note over the target group and drop.",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"bqsbk",text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},{key:"cvojm",text:"- To ungroup certain note or group from current group, use right click > ungroup option.",type:"unstyled",depth:0,inlineStyleRanges:[{offset:59,length:11,style:"BOLD"},{offset:73,length:8,style:"BOLD"}],entityRanges:[],data:{}}],entityMap:{}}}};!function(e){e.REPLACE="Notes/Groups/Actions/REPLACE",e.REPLACE_ALL="Notes/Groups/Actions/REPLACE_ALL"}(Te||(Te={}));var He={root:{id:"root",parent:void 0,title:"/",children:["fakultet","ostalo","instruction"]},fakultet:{id:"fakultet",parent:"root",title:"Fakultet",children:[]},ostalo:{id:"ostalo",parent:"root",title:"Ostalo",children:[]}};var Fe=Object(Ue.combineReducers)({currentGroupID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.OPEN_GROUP:return t.payload;default:return e}},groups:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case z.CREATE_RECORD:return Object(D.a)({},r,Object(Be.a)({},a.payload.parent,Object(D.a)({},r[a.payload.parent],{children:r[a.payload.parent].children.concat(a.payload.id)})));case z.REMOVE_RECORD:return Object(D.a)({},r,Object(Be.a)({},a.payload.parent,Object(D.a)({},r[a.payload.parent],{children:r[a.payload.parent].children.filter((function(e){return e!==a.payload.id}))})));case z.CREATE_GROUP:return Object(D.a)({},r,(e={},Object(Be.a)(e,a.payload.parent,Object(D.a)({},r[a.payload.parent],{children:r[a.payload.parent].children.concat(a.payload.id)})),Object(Be.a)(e,a.payload.id,Object(D.a)({},a.payload)),e));case z.UPDATE_GROUP:return Object(D.a)({},r,Object(Be.a)({},a.payload.id,Object(D.a)({},r[a.payload.id],{},a.payload)));case z.REMOVE_GROUP:return Object(D.a)({},V.object.deleteProperty(a.payload.id,r),Object(Be.a)({},a.payload.parent,Object(D.a)({},r[a.payload.parent],{children:r[a.payload.parent].children.filter((function(e){return e!==a.payload.id}))})));case z.MOVE_GROUP:return Object(D.a)({},r,(t={},Object(Be.a)(t,a.payload.targetGroupID,Object(D.a)({},r[a.payload.targetGroupID],{children:r[a.payload.targetGroupID].children.concat(a.payload.id)})),Object(Be.a)(t,a.payload.parent,Object(D.a)({},r[a.payload.parent],{children:r[a.payload.parent].children.filter((function(e){return e!==a.payload.id}))})),Object(Be.a)(t,a.payload.id,Object(D.a)({},r[a.payload.id],{parent:a.payload.targetGroupID})),t));case z.MOVE_RECORD:return Object(D.a)({},r,(n={},Object(Be.a)(n,a.payload.targetGroupID,Object(D.a)({},r[a.payload.targetGroupID],{children:r[a.payload.targetGroupID].children.concat(a.payload.id)})),Object(Be.a)(n,a.payload.parent,Object(D.a)({},r[a.payload.parent],{children:r[a.payload.parent].children.filter((function(e){return e!==a.payload.id}))})),n));case z.REORDER:return Object(D.a)({},r,Object(Be.a)({},a.payload.id,Object(D.a)({},a.payload)));default:return r}},records:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.CREATE_RECORD:return Object(D.a)({},e,Object(Be.a)({},t.payload.id,Object(D.a)({},t.payload)));case z.REMOVE_RECORD:return V.object.deleteProperty(t.payload.id,e);case z.UPDATE_RECORD:return Object(D.a)({},e,Object(Be.a)({},t.payload.id,Object(D.a)({},e[t.payload.id],{},t.payload)));case z.MOVE_RECORD:return Object(D.a)({},e,Object(Be.a)({},t.payload.id,Object(D.a)({},e[t.payload.id],{parent:t.payload.targetGroupID})));default:return e}}});var Ke,ze={autoSave:!0,saveAndClose:!1,spellCheck:!1};!function(e){e.REPLACE="Settings/Editor/Actions/REPLACE",e.REPLACE_ALL="Settings/Editor/Actions/REPLACE_ALL"}(Ke||(Ke={}));var qe,Ye={softDelete:!0};!function(e){e.REPLACE="Settings/Notes/Actions/REPLACE",e.REPLACE_ALL="Settings/Notes/Actions/REPLACE_ALL"}(qe||(qe={}));var We=Object(Ue.combineReducers)({editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke.REPLACE:return Object(D.a)({},e,{},t.payload);case Ke.REPLACE_ALL:return Object(D.a)({},t.payload);default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe.REPLACE:return Object(D.a)({},e,{},t.payload);case qe.REPLACE_ALL:return Object(D.a)({},t.payload);default:return e}}}),Je=n(102);var Qe=Object(Ue.combineReducers)({notes:Fe,editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.REPLACE:return Object(D.a)({},e,{},t.payload);case m.REPLACE_ALL:return Object(D.a)({},t.payload);default:return e}},settings:We,overlays:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C.OPEN_OVERLAY:return[].concat(Object(Je.a)(e),[t.payload]);case C.CLOSE_OVERLAY:return e.filter((function(e){return e.id!==t.payload}));default:return e}}}),Xe=[_e.a],Ze=Object(Ue.createStore)(Qe,Object(Ve.composeWithDevTools)(Ue.applyMiddleware.apply(void 0,Xe)));s.a.render(l.a.createElement(p.a,{store:Ze},l.a.createElement(Pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[104,1,2]]]);
//# sourceMappingURL=main.adfeb726.chunk.js.map