(this.webpackJsonpnotebook=this.webpackJsonpnotebook||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},113:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"first",(function(){return E})),n.d(a,"last",(function(){return m}));var r={};n.r(r),n.d(r,"deleteProperty",(function(){return p}));var o={};n.r(o),n.d(o,"generateRandomString",(function(){return h}));var c=n(1),i=n.n(c),l=n(12),u=n.n(l),s=(n(104),n(105),n(21)),d=n(33);n(113);function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&!(e.length<=0))return e[0]}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&!(e.length<=0))return e[e.length-1]}var f=n(95),v=n(98),p=function(e,t){t[e];return Object(f.a)(t,[e].map(v.a))};function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t="";if(e<=0)return t;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t.length<e;){var a=Math.floor(Math.random()*n.length);t+=n.charAt(a)}return t}var C={array:a,object:r,string:o},b=n(14),g=(n(207),n(9));n(208),n(209);function N(e){return i.a.createElement("button",{className:"EditorBarButton",title:e.title,onMouseDown:function(t){"function"===typeof e.onClick&&e.onClick(t,e.action)},"data-active":e.active},e.children||e.text)}var R,L,O=n(20);!function(e){e.STRIKETHROUGH="STRIKETHROUGH",e.BOLD="BOLD",e.ITALIC="ITALIC",e.UNDERLINE="UNDERLINE",e.CODE="CODE",e.HIGHLIGHT="HIGHLIGHT"}(L||(L={}));var S=(R={},Object(O.a)(R,L.STRIKETHROUGH,{textDecoration:"line-through"}),Object(O.a)(R,L.HIGHLIGHT,{backgroundColor:"#b2ffb2"}),R),y=[L.STRIKETHROUGH,L.BOLD,L.ITALIC,L.UNDERLINE,L.CODE,L.HIGHLIGHT];function A(e){function t(t,n){"function"===typeof e.onAction&&e.onAction(t,n)}return i.a.createElement("div",{id:"EditorBar",className:"EditorBar"},i.a.createElement(N,{onClick:t,action:L.BOLD,title:"Bold",active:e.currentInlineStyles.has(L.BOLD)},i.a.createElement(g.d,null)),i.a.createElement(N,{onClick:t,action:L.ITALIC,title:"Italic",active:e.currentInlineStyles.has(L.ITALIC)},i.a.createElement(g.f,null)),i.a.createElement(N,{onClick:t,action:L.UNDERLINE,title:"Underline",active:e.currentInlineStyles.has(L.UNDERLINE)},i.a.createElement(g.g,null)),i.a.createElement(N,{onClick:t,action:L.STRIKETHROUGH,title:"Strikethrough",active:e.currentInlineStyles.has(L.STRIKETHROUGH)},i.a.createElement(g.h,null)),i.a.createElement(N,{onClick:e.onReset,title:"Clear formatting"},i.a.createElement(g.e,null)))}var I=new Map;I.set(66,"b"),I.set(73,"i"),I.set(83,"s"),I.set(85,"u"),I.set(87,"y"),I.set(97,"z");var k,w=I;!function(e){e.UNDO="UNDO",e.REDO="REDO",e.SAVE="SAVE"}(k||(k={}));var j=Object(c.forwardRef)((function(e,t){var n=Object(c.useState)(b.EditorState.createEmpty()),a=Object(d.a)(n,2),r=a[0],o=a[1],l=Object(c.useRef)();function u(t){(o(t),"function"===typeof e.onChange&&e.saved)&&(t.getCurrentContent().getBlockMap().equals(r.getCurrentContent().getBlockMap())||e.onChange())}function s(e,t){e&&e.preventDefault(),t&&u(b.RichUtils.toggleInlineStyle(r,t))}return Object(c.useImperativeHandle)(t,(function(){return{getPlainText:function(){return r.getCurrentContent().getPlainText()},getHTML:function(){return Object(b.convertToRaw)(r.getCurrentContent())},focus:function(){l.current.focus()},blur:function(){l.current.blur()}}})),i.a.createElement("div",{id:"Editor",className:"Editor",onClick:function(){l&&l.current&&r&&(r.getSelection().getHasFocus()||u(b.EditorState.moveFocusToEnd(r)))}},i.a.createElement("div",{className:"EditorBar__wrapper"},i.a.createElement(A,{onAction:s,onReset:function(e){e&&e.preventDefault(),u(b.EditorState.forceSelection(b.EditorState.createWithContent(y.reduce((function(e,t){return b.Modifier.removeInlineStyle(e,r.getSelection(),t)}),r.getCurrentContent())),r.getSelection()))},currentInlineStyles:r.getCurrentInlineStyle()})),i.a.createElement("div",{className:"DraftEditor__wrapper"},i.a.createElement(b.Editor,{ref:l,editorState:r,onChange:u,customStyleMap:S,keyBindingFn:function(e){var t=null===e||void 0===e?void 0:e.ctrlKey,n=null===e||void 0===e?void 0:e.shiftKey,a=null===e||void 0===e?void 0:e.keyCode,r=w.get(a);return t&&"b"===r?L.BOLD:t&&"i"===r?L.ITALIC:t&&"u"===r?L.UNDERLINE:t&&n&&"s"===r?L.STRIKETHROUGH:t&&"s"===r?k.SAVE:t&&"z"===r?k.UNDO:t&&"y"===r?k.REDO:Object(b.getDefaultKeyBinding)(e)},handleKeyCommand:function(e,t){switch(e){case L.BOLD:return s(void 0,L.BOLD),"handled";case L.ITALIC:return s(void 0,L.ITALIC),"handled";case L.UNDERLINE:return s(void 0,L.UNDERLINE),"handled";case L.STRIKETHROUGH:return s(void 0,L.STRIKETHROUGH),"handled";case k.UNDO:return u(b.EditorState.undo(t)),"handled";case k.REDO:return u(b.EditorState.redo(t)),"handled";case k.SAVE:return"handled";default:return"not-handled"}},spellCheck:e.spellCheck})))})),D=n(55),H=(n(210),n(211),Object(c.forwardRef)((function(e,t){var n=Object(c.useRef)();return Object(c.useImperativeHandle)(t,(function(){return{getValue:function(){return n.current?n.current.value:""}}})),i.a.createElement("input",{type:"text",className:"NoteEditorHeaderInput",ref:n,defaultValue:e.initialValue,placeholder:"New title",onChange:e.onChange})})));n(212);function T(e){return i.a.createElement("button",{className:"NoteEditorHeaderButton",onClick:function(){"function"===typeof e.onClick&&e.onClick()},title:e.title,tabIndex:e.tabIndex},e.children||e.text)}n(213);function _(e){return i.a.createElement("div",{className:"SavedContentBubble",title:e.saved?"All changes has been saved.":"Some changes are not saved."},i.a.createElement("span",{className:e.saved?"saved":""}))}var x=Object(c.forwardRef)((function(e,t){return i.a.createElement("header",{id:"NoteEditorHeader",className:"NoteEditorHeader"},i.a.createElement(H,{ref:t,onChange:e.onChange}),e.id&&i.a.createElement(_,{saved:e.saved}),i.a.createElement(T,{title:e.maximized?"Minimize":"Maximize",onClick:e.onResize},e.maximized?i.a.createElement(D.b,{className:"icon"}):i.a.createElement(D.a,{className:"icon"})),i.a.createElement(T,{title:"Close",onClick:e.onClose},i.a.createElement(g.a,{className:"icon"})))}));n(214);function P(e){return i.a.createElement("footer",{id:"NoteEditorFooter",className:"NoteEditorFooter"},i.a.createElement("button",{className:"NoteEditorFooter__button",onClick:e.onSave},"Save"))}function B(e){var t=Object(c.useState)(e.maximized),n=Object(d.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(Boolean(e.id)),l=Object(d.a)(o,2),u=l[0],s=l[1],E=Object(c.useRef)(),m=Object(c.useRef)(),f=Object(c.useRef)();function v(){f.current&&clearTimeout(f.current),e.autoSave&&e.id&&(f.current=setTimeout((function(){p()}),5e3)),u&&s(!1)}function p(){var t="",n={entityMap:{},blocks:[]},a=e.id||C.string.generateRandomString();E&&E.current&&(t=E.current.getValue()),m&&m.current&&(n=m.current.getHTML());var r={id:a,title:t,content:n};"function"===typeof e.updateOrInsert&&(e.updateOrInsert(r),e.saveAndClose&&!e.autoSave&&e.close(),s(!0))}return i.a.createElement("div",{id:"NoteEditor",className:"NoteEditor__container",onKeyDown:function(e){var t=e.ctrlKey,n=e.shiftKey,a=e.keyCode,r=w.get(a);t&&!n&&"s"===r&&(e.preventDefault(),f.current&&clearTimeout(f.current),p())}},i.a.createElement("div",{className:"NoteEditor__wrapper"},i.a.createElement("div",{className:["NodeEditorCanvas",a?"maximized":""].join(" ").trim()},i.a.createElement("div",{className:"NoteEditorCanvas__wrapper"},i.a.createElement(x,{maximized:a,onResize:function(){r(!a)},onClose:e.close,ref:E,onChange:v,id:e.id,saved:u}),i.a.createElement(j,{ref:m,spellCheck:e.spellCheck,onChange:v,saved:u}),i.a.createElement(P,{onSave:p})))))}var U,G=n(7),K=n.n(G),F=n(15),M=n(23);function z(e){return function(){var t=Object(M.a)(K.a.mark((function t(n,a){var r,o,c;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),o=r.notes,c=o.records,e){t.next=4;break}throw Error("NoteRecord object is absent.");case 4:if(e.id&&!c[e.id]){t.next=6;break}throw Error("NoteRecord with the ID ".concat(e.id," already exists."));case 6:n({type:U.REPLACE_ALL,payload:Object(F.a)({},c,Object(O.a)({},e.id,e))});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function V(e){return function(){var t=Object(M.a)(K.a.mark((function t(n,a){var r,o,c;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),o=r.notes,c=o.records,e){t.next=4;break}throw Error("NoteRecord must contain valid ID.");case 4:if(c[e.id]){t.next=6;break}throw Error("NoteRecord with ID ".concat(e.id," is absent."));case 6:n({type:U.REPLACE,payload:e});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}!function(e){e.REPLACE="Notes/Records/Actions/REPLACE",e.REPLACE_ALL="Notes/Records/Actions/REPLACE_ALL"}(U||(U={}));var W,J={open:!1,id:void 0};function q(e){return function(){var t=Object(M.a)(K.a.mark((function t(n,a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:W.REPLACE,payload:{open:!0,id:e}});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}!function(e){e.REPLACE="Editor/Actions/REPLACE",e.REPLACE_ALL="Editor/Actions/REPLACE_ALL"}(W||(W={}));var Q=Object(s.c)((function(e){var t=e.editor,n=e.settings.editor,a=n.spellCheck,r=n.autoSave,o=n.saveAndClose;return{open:t.open,id:t.id,spellCheck:a,autoSave:r,saveAndClose:o}}),(function(e){return{updateOrInsert:function(t){return Object(s.b)((function(){e(function(e){return function(){var t=Object(M.a)(K.a.mark((function t(n,a){var r,o;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),o=r.notes,!o.records[e.id]){t.next=5;break}return n(V(e)),t.abrupt("return");case 5:n(z(e));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t)),e(q(t.id))}))},close:function(){return e(function(){var e=Object(M.a)(K.a.mark((function e(t,n){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:W.REPLACE_ALL,payload:{open:!1,id:void 0}});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}}}))((function(e){return i.a.createElement(i.a.Fragment,null,e.open&&u.a.createPortal(i.a.createElement(B,e),document.getElementById("note-editor-root")))}));n(216),n(217);var X=Object(s.c)(null,(function(e){return{openNoteEditor:function(){return e(q())}}}))((function(e){return i.a.createElement("div",{className:"AppHeaderControls"},i.a.createElement("button",{disabled:!0,title:"Create directory"},i.a.createElement(g.c,null)),i.a.createElement("button",{title:"Create file",onClick:e.openNoteEditor},i.a.createElement(g.b,null)))}));function Y(e){return i.a.createElement("header",{id:"AppHeader",className:"AppHeader"},i.a.createElement("h1",{className:"title"},"Notebook"),i.a.createElement(X,null))}n(218),n(219);function Z(e){return i.a.createElement("header",{className:"SettingsDrawerHeader"},i.a.createElement("h3",{className:"SettingsDrawerHeader__title"},"Settings"),i.a.createElement("button",{className:"SettingsDrawerHeader__button"},i.a.createElement(g.a,null)))}n(220);function $(e){return i.a.createElement("footer",{className:"SettingsDrawerFooter"},i.a.createElement("button",{className:"SettingsDrawerFooter__button apply"},i.a.createElement("span",null,"Apply")),i.a.createElement("button",{className:"SettingsDrawerFooter__button reset"},i.a.createElement("span",null,"Reset")))}n(221);function ee(e){return i.a.createElement("label",{htmlFor:e.id,className:"Switch"},i.a.createElement("input",{id:e.id,name:e.name,type:"checkbox",defaultChecked:e.defaultChecked,checked:e.checked,onChange:e.onChange}),i.a.createElement("span",{className:"SwitchSlider ".concat(e.rounded?"round":"")}))}n(222);function te(e){return i.a.createElement("div",{className:"LabeledSwitch"},i.a.createElement("label",{htmlFor:e.id},e.label),i.a.createElement(ee,{id:e.id,name:e.name,onChange:e.onChange}))}n(223);function ne(e){return i.a.createElement("div",{className:"FormBlock"},e.children)}function ae(e){return i.a.createElement("div",{className:"EditorSettings"},i.a.createElement("h4",null,"Editor"),i.a.createElement(ne,null,i.a.createElement(te,{id:"auto-save",name:"auto-save",label:"Auto Save",onChange:function(){}})),i.a.createElement(ne,null,i.a.createElement(te,{id:"save-and-close",name:"save-and-close",label:"Save and Close",onChange:function(){}})),i.a.createElement(ne,null,i.a.createElement(te,{id:"spellcheck",name:"spellcheck",label:"Spell check",onChange:function(){}})))}function re(e){return i.a.createElement("div",{className:"SettingsDrawer"},i.a.createElement("div",{className:"SettingsDrawer__container"},i.a.createElement(Z,null),i.a.createElement("div",{style:{flex:1}},i.a.createElement(ae,null)),i.a.createElement($,null)))}var oe=Object(s.c)(null,null)((function(e){return i.a.createElement(i.a.Fragment,null,u.a.createPortal(i.a.createElement(re,e),document.getElementById("settings-drawer-root")))}));var ce=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(Y,null),i.a.createElement(Q,null),i.a.createElement(oe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=n(13),le=n(96),ue=n(97);var se=Object(ie.combineReducers)({records:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U.REPLACE:return Object(F.a)({},e,Object(O.a)({},t.payload.id,t.payload));case U.REPLACE_ALL:return Object(F.a)({},t.payload);default:return e}}});var de,Ee={autoSave:!0,saveAndClose:!0,spellCheck:!1};!function(e){e.REPLACE="REPLACE",e.REPLACE_ALL="REPLACE_ALL"}(de||(de={}));var me=Object(ie.combineReducers)({editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de.REPLACE:return Object(F.a)({},e,{},t.payload);case de.REPLACE_ALL:return Object(F.a)({},t.payload);default:return e}}}),fe=Object(ie.combineReducers)({notes:se,editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.REPLACE:return Object(F.a)({},e,{},t.payload);case W.REPLACE_ALL:return Object(F.a)({},t.payload);default:return e}},settings:me}),ve=[le.a],pe=Object(ie.createStore)(fe,Object(ue.composeWithDevTools)(ie.applyMiddleware.apply(void 0,ve)));u.a.render(i.a.createElement(s.a,{store:pe},i.a.createElement(ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,n){e.exports=n(224)}},[[99,1,2]]]);
//# sourceMappingURL=main.55c06b84.chunk.js.map