(this.webpackJsonpnotebook=this.webpackJsonpnotebook||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},113:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"first",(function(){return f})),n.d(a,"last",(function(){return E}));var r={};n.r(r),n.d(r,"deleteProperty",(function(){return p}));var c={};n.r(c),n.d(c,"generateRandomString",(function(){return h}));var o=n(1),i=n.n(o),l=n(14),u=n.n(l),s=(n(104),n(105),n(18)),d=n(23);n(113);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&!(e.length<=0))return e[0]}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e&&!(e.length<=0))return e[e.length-1]}var m=n(95),v=n(98),p=function(e,t){t[e];return Object(m.a)(t,[e].map(v.a))};function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t="";if(e<=0)return t;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t.length<e;){var a=Math.floor(Math.random()*n.length);t+=n.charAt(a)}return t}var C={array:a,object:r,string:c},b=n(16),g=(n(207),n(11));n(208),n(209);function O(e){return i.a.createElement("button",{className:"EditorBarButton",title:e.title,onMouseDown:function(t){"function"===typeof e.onClick&&e.onClick(t,e.action)},"data-active":e.active},e.children||e.text)}var R,S,N=n(22);!function(e){e.STRIKETHROUGH="STRIKETHROUGH",e.BOLD="BOLD",e.ITALIC="ITALIC",e.UNDERLINE="UNDERLINE",e.CODE="CODE",e.HIGHLIGHT="HIGHLIGHT"}(S||(S={}));var L=(R={},Object(N.a)(R,S.STRIKETHROUGH,{textDecoration:"line-through"}),Object(N.a)(R,S.HIGHLIGHT,{backgroundColor:"#b2ffb2"}),R),A=[S.STRIKETHROUGH,S.BOLD,S.ITALIC,S.UNDERLINE,S.CODE,S.HIGHLIGHT];function k(e){function t(t,n){"function"===typeof e.onAction&&e.onAction(t,n)}return i.a.createElement("div",{id:"EditorBar",className:"EditorBar"},i.a.createElement(O,{onClick:t,action:S.BOLD,title:"Bold",active:e.currentInlineStyles.has(S.BOLD)},i.a.createElement(g.d,null)),i.a.createElement(O,{onClick:t,action:S.ITALIC,title:"Italic",active:e.currentInlineStyles.has(S.ITALIC)},i.a.createElement(g.f,null)),i.a.createElement(O,{onClick:t,action:S.UNDERLINE,title:"Underline",active:e.currentInlineStyles.has(S.UNDERLINE)},i.a.createElement(g.g,null)),i.a.createElement(O,{onClick:t,action:S.STRIKETHROUGH,title:"Strikethrough",active:e.currentInlineStyles.has(S.STRIKETHROUGH)},i.a.createElement(g.h,null)),i.a.createElement(O,{onClick:e.onReset,title:"Clear formatting"},i.a.createElement(g.e,null)))}var y=new Map;y.set(66,"b"),y.set(73,"i"),y.set(83,"s"),y.set(85,"u"),y.set(87,"y"),y.set(97,"z");var I,j=y;!function(e){e.UNDO="UNDO",e.REDO="REDO",e.SAVE="SAVE"}(I||(I={}));var w=Object(o.forwardRef)((function(e,t){var n=Object(o.useState)(b.EditorState.createEmpty()),a=Object(d.a)(n,2),r=a[0],c=a[1],l=Object(o.useRef)();function u(t){(c(t),"function"===typeof e.onChange&&e.saved)&&(t.getCurrentContent().getBlockMap().equals(r.getCurrentContent().getBlockMap())||e.onChange())}function s(e,t){e&&e.preventDefault(),t&&u(b.RichUtils.toggleInlineStyle(r,t))}return Object(o.useImperativeHandle)(t,(function(){return{getPlainText:function(){return r.getCurrentContent().getPlainText()},getHTML:function(){return Object(b.convertToRaw)(r.getCurrentContent())},focus:function(){l.current.focus()},blur:function(){l.current.blur()}}})),i.a.createElement("div",{id:"Editor",className:"Editor",onClick:function(){l&&l.current&&r&&(r.getSelection().getHasFocus()||u(b.EditorState.moveFocusToEnd(r)))}},i.a.createElement("div",{className:"EditorBar__wrapper"},i.a.createElement(k,{onAction:s,onReset:function(e){e&&e.preventDefault(),u(b.EditorState.forceSelection(b.EditorState.createWithContent(A.reduce((function(e,t){return b.Modifier.removeInlineStyle(e,r.getSelection(),t)}),r.getCurrentContent())),r.getSelection()))},currentInlineStyles:r.getCurrentInlineStyle()})),i.a.createElement("div",{className:"DraftEditor__wrapper"},i.a.createElement(b.Editor,{ref:l,editorState:r,onChange:u,customStyleMap:L,keyBindingFn:function(e){var t=null===e||void 0===e?void 0:e.ctrlKey,n=null===e||void 0===e?void 0:e.shiftKey,a=null===e||void 0===e?void 0:e.keyCode,r=j.get(a);return t&&"b"===r?S.BOLD:t&&"i"===r?S.ITALIC:t&&"u"===r?S.UNDERLINE:t&&n&&"s"===r?S.STRIKETHROUGH:t&&"s"===r?I.SAVE:t&&"z"===r?I.UNDO:t&&"y"===r?I.REDO:Object(b.getDefaultKeyBinding)(e)},handleKeyCommand:function(e,t){switch(e){case S.BOLD:return s(void 0,S.BOLD),"handled";case S.ITALIC:return s(void 0,S.ITALIC),"handled";case S.UNDERLINE:return s(void 0,S.UNDERLINE),"handled";case S.STRIKETHROUGH:return s(void 0,S.STRIKETHROUGH),"handled";case I.UNDO:return u(b.EditorState.undo(t)),"handled";case I.REDO:return u(b.EditorState.redo(t)),"handled";case I.SAVE:return"handled";default:return"not-handled"}},spellCheck:e.spellCheck})))})),D=n(55),H=(n(210),n(211),Object(o.forwardRef)((function(e,t){var n=Object(o.useRef)();return Object(o.useImperativeHandle)(t,(function(){return{getValue:function(){return n.current?n.current.value:""}}})),i.a.createElement("input",{type:"text",className:"NoteEditorHeaderInput",ref:n,defaultValue:e.initialValue,placeholder:"New title",onChange:e.onChange})})));n(212);function T(e){return i.a.createElement("button",{className:"NoteEditorHeaderButton",onClick:function(){"function"===typeof e.onClick&&e.onClick()},title:e.title,tabIndex:e.tabIndex},e.children||e.text)}n(213);function _(e){return i.a.createElement("div",{className:"SavedContentBubble",title:e.saved?"All changes has been saved.":"Some changes are not saved."},i.a.createElement("span",{className:e.saved?"saved":""}))}var x=Object(o.forwardRef)((function(e,t){return i.a.createElement("header",{id:"NoteEditorHeader",className:"NoteEditorHeader"},i.a.createElement(H,{ref:t,onChange:e.onChange}),e.id&&i.a.createElement(_,{saved:e.saved}),i.a.createElement(T,{title:e.maximized?"Minimize":"Maximize",onClick:e.onResize},e.maximized?i.a.createElement(D.b,{className:"icon"}):i.a.createElement(D.a,{className:"icon"})),i.a.createElement(T,{title:"Close",onClick:e.onClose},i.a.createElement(g.a,{className:"icon"})))}));n(214);function P(e){return i.a.createElement("footer",{id:"NoteEditorFooter",className:"NoteEditorFooter"},i.a.createElement("button",{className:"NoteEditorFooter__button",onClick:e.onSave},"Save"))}function B(e){var t=Object(o.useState)(e.maximized),n=Object(d.a)(t,2),a=n[0],r=n[1],c=Object(o.useState)(Boolean(e.id)),l=Object(d.a)(c,2),u=l[0],s=l[1],f=Object(o.useRef)(),E=Object(o.useRef)(),m=Object(o.useRef)();function v(){m.current&&clearTimeout(m.current),e.autoSave&&e.id&&(m.current=setTimeout((function(){p()}),5e3)),u&&s(!1)}function p(){var t="",n={entityMap:{},blocks:[]},a=e.id||C.string.generateRandomString();f&&f.current&&(t=f.current.getValue()),E&&E.current&&(n=E.current.getHTML());var r={id:a,title:t,content:n};"function"===typeof e.updateOrInsert&&(e.updateOrInsert(r),e.saveAndClose&&!e.autoSave&&e.close(),s(!0))}return i.a.createElement("div",{id:"NoteEditor",className:"NoteEditor__container",onKeyDown:function(e){var t=e.ctrlKey,n=e.shiftKey,a=e.keyCode,r=j.get(a);t&&!n&&"s"===r&&(e.preventDefault(),m.current&&clearTimeout(m.current),p())}},i.a.createElement("div",{className:"NoteEditor__wrapper"},i.a.createElement("div",{className:["NodeEditorCanvas",a?"maximized":""].join(" ").trim()},i.a.createElement("div",{className:"NoteEditorCanvas__wrapper"},i.a.createElement(x,{maximized:a,onResize:function(){r(!a)},onClose:e.close,ref:f,onChange:v,id:e.id,saved:u}),i.a.createElement(w,{ref:E,spellCheck:e.spellCheck,onChange:v,saved:u}),i.a.createElement(P,{onSave:p})))))}var U,G=n(4),K=n.n(G),F=n(10),M=n(6);function z(e){return function(){var t=Object(M.a)(K.a.mark((function t(n,a){var r,c,o;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),c=r.notes,o=c.records,e){t.next=4;break}throw Error("NoteRecord object is absent.");case 4:if(e.id&&!o[e.id]){t.next=6;break}throw Error("NoteRecord with the ID ".concat(e.id," already exists."));case 6:n({type:U.REPLACE_ALL,payload:Object(F.a)({},o,Object(N.a)({},e.id,e))});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function V(e){return function(){var t=Object(M.a)(K.a.mark((function t(n,a){var r,c,o;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),c=r.notes,o=c.records,e){t.next=4;break}throw Error("NoteRecord must contain valid ID.");case 4:if(o[e.id]){t.next=6;break}throw Error("NoteRecord with ID ".concat(e.id," is absent."));case 6:n({type:U.REPLACE,payload:e});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}!function(e){e.REPLACE="Notes/Records/Actions/REPLACE",e.REPLACE_ALL="Notes/Records/Actions/REPLACE_ALL"}(U||(U={}));var W,J={open:!1,id:void 0};function q(e){return function(){var t=Object(M.a)(K.a.mark((function t(n,a){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:W.REPLACE,payload:{open:!0,id:e}});case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}!function(e){e.REPLACE="Editor/Actions/REPLACE",e.REPLACE_ALL="Editor/Actions/REPLACE_ALL"}(W||(W={}));var Y=Object(s.c)((function(e){var t=e.editor,n=e.settings.editor,a=n.spellCheck,r=n.autoSave,c=n.saveAndClose;return{open:t.open,id:t.id,spellCheck:a,autoSave:r,saveAndClose:c}}),(function(e){return{updateOrInsert:function(t){return Object(s.b)((function(){e(function(e){return function(){var t=Object(M.a)(K.a.mark((function t(n,a){var r,c;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a(),c=r.notes,!c.records[e.id]){t.next=5;break}return n(V(e)),t.abrupt("return");case 5:n(z(e));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t)),e(q(t.id))}))},close:function(){return e(function(){var e=Object(M.a)(K.a.mark((function e(t,n){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:W.REPLACE_ALL,payload:{open:!1,id:void 0}});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}}}))((function(e){return i.a.createElement(i.a.Fragment,null,e.open&&u.a.createPortal(i.a.createElement(B,e),document.getElementById("note-editor-root")))}));n(216),n(217);var Q=Object(s.c)(null,(function(e){return{openNoteEditor:function(){return e(q())}}}))((function(e){return i.a.createElement("div",{className:"AppHeaderControls"},i.a.createElement("button",{disabled:!0,title:"Create directory"},i.a.createElement(g.c,null)),i.a.createElement("button",{title:"Create file",onClick:e.openNoteEditor},i.a.createElement(g.b,null)))}));function X(e){return i.a.createElement("header",{id:"AppHeader",className:"AppHeader"},i.a.createElement("h1",{className:"title"},"Notebook"),i.a.createElement(Q,null))}n(218),n(219);function Z(e){return i.a.createElement("header",{className:"SettingsDrawerHeader"},i.a.createElement("h3",{className:"SettingsDrawerHeader__title"},"Settings"),i.a.createElement("button",{className:"SettingsDrawerHeader__button"},i.a.createElement(g.a,null)))}n(220);function $(e){return i.a.createElement("footer",{className:"SettingsDrawerFooter"},i.a.createElement("button",{className:"SettingsDrawerFooter__button apply",onClick:e.onApply},i.a.createElement("span",null,"Apply")),i.a.createElement("button",{className:"SettingsDrawerFooter__button reset",onClick:e.onReset},i.a.createElement("span",null,"Reset")))}n(221),n(222);function ee(e){return i.a.createElement("label",{htmlFor:e.id,className:"Switch"},i.a.createElement("input",{id:e.id,name:e.name,type:"checkbox",defaultChecked:e.defaultChecked,checked:e.checked,onChange:e.onChange,disabled:e.disabled}),i.a.createElement("span",{className:"SwitchSlider ".concat(e.rounded?"round":"")}))}n(223);function te(e){return i.a.createElement("div",{className:"LabeledSwitch"},i.a.createElement("label",{htmlFor:e.id},e.label),i.a.createElement(ee,{id:e.id,name:e.name,onChange:e.onChange,disabled:e.disabled,checked:e.checked,defaultChecked:e.defaultChecked}))}n(224);function ne(e){return i.a.createElement("div",{className:"FormBlock"},e.children)}n(225);var ae,re=Object(o.forwardRef)((function(e,t){var n=Object(o.useState)(!!e.autoSave),a=Object(d.a)(n,2),r=a[0],c=a[1],l=Object(o.useState)(!!e.saveAndClose),u=Object(d.a)(l,2),s=u[0],f=u[1],E=Object(o.useState)(!!e.spellCheck),m=Object(d.a)(E,2),v=m[0],p=m[1];return Object(o.useEffect)((function(){c(!!e.autoSave)}),[e.autoSave]),Object(o.useEffect)((function(){f(!!e.saveAndClose)}),[e.saveAndClose]),Object(o.useEffect)((function(){p(!!e.spellCheck)}),[e.spellCheck]),Object(o.useImperativeHandle)(t,(function(){return{getState:function(){return{autoSave:r,saveAndClose:s,spellCheck:v}},reset:function(){c(!!e.autoSave),f(!!e.saveAndClose),p(!!e.spellCheck)}}})),i.a.createElement("div",{className:"EditorSettings"},i.a.createElement(ne,null,i.a.createElement(te,{id:"auto-save",name:"auto-save",label:"Auto Save",checked:r,onChange:function(){return(e=!r)&&f(!1),void c(e);var e}})),i.a.createElement(ne,null,i.a.createElement(te,{id:"save-and-close",name:"save-and-close",label:"Save and Close",disabled:r,checked:s,onChange:function(){return f(!s)}})),i.a.createElement(ne,null,i.a.createElement(te,{id:"spellcheck",name:"spellcheck",label:"Spell check",checked:v,onChange:function(){return p(!v)}})))})),ce=(ae="Editor",function(e){return Object(o.forwardRef)((function(t,n){return i.a.createElement("section",{className:"SettingSection"},i.a.createElement("h4",{className:"SettingSection__title"},ae),i.a.createElement(e,Object.assign({ref:n},t)))}))})(re);function oe(e){var t=Object(o.useRef)();return i.a.createElement("div",{className:"SettingsDrawer"},i.a.createElement("div",{className:"SettingsDrawer__container"},i.a.createElement(Z,null),i.a.createElement("div",{style:{flex:1,overflowY:"auto"}},i.a.createElement(ce,{ref:t,autoSave:e.editor.autoSave,saveAndClose:e.editor.saveAndClose,spellCheck:e.editor.spellCheck})),i.a.createElement($,{onApply:function(){var n={};t.current&&(n=t.current.getState()),e.apply(n)},onReset:function(){t.current&&t.current.reset()}})))}var ie,le={autoSave:!0,saveAndClose:!1,spellCheck:!1};!function(e){e.REPLACE="REPLACE",e.REPLACE_ALL="REPLACE_ALL"}(ie||(ie={}));var ue=Object(s.c)((function(e){return{open:!0,editor:e.settings.editor}}),(function(e){return{apply:function(t){return Object(s.b)((function(){e(function(e){return function(){var t=Object(M.a)(K.a.mark((function t(n,a){var r,c,o;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=a(),c=r.settings,o=c.editor,n({type:ie.REPLACE_ALL,payload:Object(F.a)({},o,{},e)});case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}(t))}))}}}))((function(e){return i.a.createElement(i.a.Fragment,null,e.open&&u.a.createPortal(i.a.createElement(oe,e),document.getElementById("settings-drawer-root")))}));var se=function(){return i.a.createElement("div",{className:"App"},i.a.createElement(X,null),i.a.createElement(Y,null),i.a.createElement(ue,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=n(15),fe=n(96),Ee=n(97);var me=Object(de.combineReducers)({records:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U.REPLACE:return Object(F.a)({},e,Object(N.a)({},t.payload.id,t.payload));case U.REPLACE_ALL:return Object(F.a)({},t.payload);default:return e}}});var ve=Object(de.combineReducers)({editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie.REPLACE:return Object(F.a)({},e,{},t.payload);case ie.REPLACE_ALL:return Object(F.a)({},t.payload);default:return e}}}),pe=Object(de.combineReducers)({notes:me,editor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W.REPLACE:return Object(F.a)({},e,{},t.payload);case W.REPLACE_ALL:return Object(F.a)({},t.payload);default:return e}},settings:ve}),he=[fe.a],Ce=Object(de.createStore)(pe,Object(Ee.composeWithDevTools)(de.applyMiddleware.apply(void 0,he)));u.a.render(i.a.createElement(s.a,{store:Ce},i.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,n){e.exports=n(226)}},[[99,1,2]]]);
//# sourceMappingURL=main.ad2521c8.chunk.js.map